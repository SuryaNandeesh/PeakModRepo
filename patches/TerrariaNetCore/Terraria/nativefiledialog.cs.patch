--- src/Terraria/Terraria/nativefiledialog.cs
+++ src/TerrariaNetCore/Terraria/nativefiledialog.cs
@@ -58,8 +_,15 @@
 		return result;
 	}
 
+	/*
 	[DllImport("msvcrt", CallingConvention = CallingConvention.Cdecl)]
 	private static extern void free(IntPtr ptr);
+	*/
+	private static void free(IntPtr ptr)
+	{
+		// The proper way to deallocate.
+		Marshal.FreeHGlobal(ptr);
+	}
 
 	[DllImport("nfd", CallingConvention = CallingConvention.Cdecl, EntryPoint = "NFD_OpenDialog")]
 	private unsafe static extern nfdresult_t INTERNAL_NFD_OpenDialog(byte* filterList, byte* defaultPath, out IntPtr outPath);
